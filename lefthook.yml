# Lefthook configuration for Go project

pre-commit:
  parallel: true
  commands:
    fmt:
      glob: "*.go"
      run: gofmt -w {staged_files} && git add {staged_files}

    vet:
      glob: "*.go"
      run: go vet ./...

    lint:
      glob: "*.go"
      run: golangci-lint run --fix

    mod-tidy:
      glob: "go.{mod,sum}"
      run: go mod tidy

commit-msg:
  commands:
    check-message:
      run: |
        if ! grep -qE "^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .+" {1}; then
          echo "Commit message must follow conventional commits format"
          echo "Example: feat: add new feature"
          exit 1
        fi